# 1. Use Node 18 LTS (install nvm if needed)
nvm install 18 && nvm use 18

# 2. Install latest Yarn
npm install -g yarn

# 3. Go to daedalOS repo (replace with your path if needed)
cd ~/daedalOS

# 4. Clean old dependencies and caches
rm -rf node_modules yarn.lock package-lock.json
yarn cache clean

# 5. Install dependencies fresh
yarn install

# 6. Set OpenSSL legacy provider & build
export NODE_OPTIONS="--max-old-space-size=4096 --openssl-legacy-provider"
yarn build

echo "âœ… Build complete! The /out folder is ready for deployment."
